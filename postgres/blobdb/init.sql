DO $$ 
BEGIN
    IF NOT EXISTS (SELECT 1 FROM pg_database WHERE datname = 'midi_blob_db') THEN
        CREATE DATABASE midi_blob_db;
    END IF;
END $$;
\c midi_blob_db;

CREATE TABLE IF NOT EXISTS midi_blob (
    blob_id UUID PRIMARY KEY,
    midi_data BYTEA NOT NULL
);

INSERT INTO midi_blob (blob_id, midi_data)
SELECT 
    '860e9511-e29b-81d5-a716-846655420002'::UUID, E'\\x4D5A90000300000004000000FFFF0000B8000000000000004000000000000000000000000000000000000000000000000000000000000000000000000000000000000000'
WHERE NOT EXISTS (
    SELECT 1 FROM midi_blob WHERE blob_id = '860e9511-e29b-81d5-a716-846655420002'::UUID
);

INSERT INTO midi_blob (blob_id, midi_data)
SELECT 
    '860e9511-e29b-81d5-a716-846655450005'::UUID, E'\\x4D5A90000300000004000000FFFF0000B8000000000000004000000000000000000000000000000000000000000000000000000000000000000000000000000000000000'
WHERE NOT EXISTS (
    SELECT 1 FROM midi_blob WHERE blob_id = '860e9511-e29b-81d5-a716-846655450005'::UUID
);
